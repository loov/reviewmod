pass: baseline
package: ./testdata/testpkg

-- want.txt --
== prompt 0 ==
You are analyzing a Go function to create a summary of its behavior.


## Function: Add
Package: testpkg

```go
// Add adds two numbers.
//
// TODO: should this handle overflow?
func Add(a, b int) int {
	// This adds two numbers together.
	return a + b
}
```

Analyze this function and respond with JSON in this exact format:
{
  "purpose": "One sentence describing what this function does",
  "behavior": "How it behaves - side effects, return conditions, error cases",
  "invariants": ["preconditions", "postconditions", "guarantees"],
  "security": ["security-relevant properties for callers to know"]
}

Be precise and concise. Focus on what callers need to know.


== prompt 1 ==
You are reviewing Go code for common issues and mistakes.


## Function: Add
Package: testpkg

```go
// Add adds two numbers.
//
// TODO: should this handle overflow?
func Add(a, b int) int {
	// This adds two numbers together.
	return a + b
}
```

Is this function correct?

Respond with JSON. The "code" field must contain the exact line of code where the issue occurs, copied verbatim from the code block above.

Example:
{"issues": [{"function": "ParseConfig", "code": "	query := \"SELECT * FROM users WHERE id=\" + id", "severity": "critical", "message": "SQL injection via string concatenation", "suggestion": "Use parameterized query"}]}

If no issues found, return {"issues": []}.
